
{% load wagtailcore_tags wagtailsettings_tags %}
{% wagtail_site as current_site %}

<header class="sticky top-0 z-40 w-full border-b border-gray-200 bg-white/90 backdrop-blur-md transition dark:border-gray-700 dark:bg-gray-900/90">
    <div class="mx-auto flex max-w-7xl flex-wrap items-center gap-x-6 gap-y-4 px-4 py-4 sm:px-6 lg:px-8">
        <a
            href="/"
            data-header-logo
            class="flex items-center text-xl font-semibold uppercase tracking-wide text-gray-900 transition hover:text-mackerel-300 focus:outline-none focus:ring-2 focus:ring-mackerel-300 focus:ring-offset-2 dark:text-white"
            aria-label="Go to the Wagtail Starter Kit homepage">
            {{ current_site.site_name|default:"Site name" }}
        </a>

        <div class="ml-auto flex items-center gap-x-3 md:order-3 md:ml-0 md:hidden">
            <button
                type="button"
                class="inline-flex items-center justify-center rounded-lg border border-gray-200 p-2 text-sm font-medium text-gray-700 transition hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-mackerel-300 focus:ring-offset-2 dark:border-gray-700 dark:text-gray-300 dark:hover:text-gray-100"
                data-hs-collapse="#main-navigation"
                aria-controls="main-navigation"
                aria-expanded="false"
                aria-label="Toggle navigation"
            >
                <svg class="h-5 w-5 hs-collapse-open:hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                </svg>
                <svg class="hidden h-5 w-5 hs-collapse-open:block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
                <span class="sr-only">Menu</span>
            </button>
        </div>

        <div
            id="main-navigation"
            class="hs-collapse hidden w-full basis-full grow overflow-hidden transition-[height] duration-300 ease-in-out md:order-2 md:block md:basis-auto"
        >
            <div class="flex flex-col gap-6 border-t border-gray-200 pt-6 dark:border-gray-700 md:flex-row md:items-center md:justify-between md:gap-8 md:border-0 md:pt-0">
                <nav aria-label="Primary" class="w-full md:w-auto">
                    <ul class="flex flex-col gap-5 md:flex-row md:items-center md:gap-8">
                        {% for link in settings.navigation.NavigationSettings.primary_navigation %}
                            {% if link.value.page %}
                                <li data-desktop-nav-item>
                                    <a
                                        href="{{ link.value.get_url }}"
                                        class="text-base font-medium text-gray-700 transition hover:text-mackerel-300 focus:outline-none focus:ring-2 focus:ring-mackerel-300 focus:ring-offset-2 dark:text-gray-200 dark:hover:text-white"
                                    >
                                        {{ link.value.get_title }}
                                    </a>
                                </li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </nav>

                <div class="flex w-full flex-col gap-6 md:hidden">
                    {% include "components/search.html" with variant="mobile-menu" %}
                    <div class="flex justify-start">
                        {% include "components/theme-toggle.html" %}
                    </div>
                </div>

                <div class="hidden items-center gap-x-4 md:flex">
                    <button
                        data-toggle-search-panel
                        type="button"
                        aria-expanded="false"
                        aria-controls="search-panel"
                        aria-label="Show search overlay"
                        class="flex h-11 w-11 items-center justify-center rounded-full border border-gray-200 text-gray-600 transition hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-mackerel-300 focus:ring-offset-2 dark:border-gray-700 dark:text-gray-300 dark:hover:text-gray-100"
                    >
                        <span class="sr-only">Search</span>
                        {% include "icons/magnifying-glass.html" with class="h-5 w-5" %}
                    </button>
                    {% include "components/theme-toggle.html" %}
                </div>
            </div>
        </div>

        <div
            id="search-panel"
            data-search-panel
            class="invisible absolute inset-0 hidden min-h-full w-full bg-gray-900/70 backdrop-blur-sm transition md:flex"
        >
            {% include "components/search.html" with variant="search-panel" %}
        </div>
    </div>
</header>

