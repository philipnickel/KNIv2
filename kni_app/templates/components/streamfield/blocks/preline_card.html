{% load wagtailcore_tags wagtailimages_tags %}

{% if value.card_style == 'bordered' %}
    {% with card_classes="bg-white border border-gray-200 shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700" %}
        <div class="{{ card_classes }}">
            {% if value.image %}
                <div class="aspect-w-16 aspect-h-9">
                    {% image value.image fill-400x225 class="w-full h-auto rounded-t-xl" %}
                </div>
            {% endif %}
            <div class="p-4 md:p-6">
                <h3 class="text-xl font-semibold text-gray-800 dark:text-white">
                    {{ value.title }}
                </h3>
                {% if value.description %}
                    <p class="mt-3 text-gray-500 dark:text-gray-400">
                        {{ value.description|richtext }}
                    </p>
                {% endif %}
                {% if value.link %}
                    <div class="mt-4">
                        {% for link in value.link %}
                            {% if link.block_type == 'internal' %}
                                <a class="inline-flex items-center gap-x-1 text-sm font-medium text-blue-600 hover:text-blue-800 dark:text-blue-500 dark:hover:text-blue-400" href="{{ link.page.url }}">
                                    {{ link.title|default:link.page.title }}
                                    <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="m9 18 6-6-6-6"/>
                                    </svg>
                                </a>
                            {% elif link.block_type == 'external' %}
                                <a class="inline-flex items-center gap-x-1 text-sm font-medium text-blue-600 hover:text-blue-800 dark:text-blue-500 dark:hover:text-blue-400" href="{{ link.link }}" target="_blank" rel="noopener noreferrer">
                                    {{ link.title }}
                                    <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="m9 18 6-6-6-6"/>
                                    </svg>
                                </a>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>
    {% endwith %}
{% elif value.card_style == 'shadow' %}
    {% with card_classes="bg-white shadow-lg rounded-xl dark:bg-gray-800" %}
        <div class="{{ card_classes }}">
            {% if value.image %}
                <div class="aspect-w-16 aspect-h-9">
                    {% image value.image fill-400x225 class="w-full h-auto rounded-t-xl" %}
                </div>
            {% endif %}
            <div class="p-4 md:p-6">
                <h3 class="text-xl font-semibold text-gray-800 dark:text-white">
                    {{ value.title }}
                </h3>
                {% if value.description %}
                    <p class="mt-3 text-gray-500 dark:text-gray-400">
                        {{ value.description|richtext }}
                    </p>
                {% endif %}
                {% if value.link %}
                    <div class="mt-4">
                        {% for link in value.link %}
                            {% if link.block_type == 'internal' %}
                                <a class="inline-flex items-center gap-x-1 text-sm font-medium text-blue-600 hover:text-blue-800 dark:text-blue-500 dark:hover:text-blue-400" href="{{ link.page.url }}">
                                    {{ link.title|default:link.page.title }}
                                    <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="m9 18 6-6-6-6"/>
                                    </svg>
                                </a>
                            {% elif link.block_type == 'external' %}
                                <a class="inline-flex items-center gap-x-1 text-sm font-medium text-blue-600 hover:text-blue-800 dark:text-blue-500 dark:hover:text-blue-400" href="{{ link.link }}" target="_blank" rel="noopener noreferrer">
                                    {{ link.title }}
                                    <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="m9 18 6-6-6-6"/>
                                    </svg>
                                </a>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>
    {% endwith %}
{% else %}
    {% with card_classes="bg-white rounded-xl dark:bg-gray-800" %}
        <div class="{{ card_classes }}">
            {% if value.image %}
                <div class="aspect-w-16 aspect-h-9">
                    {% image value.image fill-400x225 class="w-full h-auto rounded-t-xl" %}
                </div>
            {% endif %}
            <div class="p-4 md:p-6">
                <h3 class="text-xl font-semibold text-gray-800 dark:text-white">
                    {{ value.title }}
                </h3>
                {% if value.description %}
                    <p class="mt-3 text-gray-500 dark:text-gray-400">
                        {{ value.description|richtext }}
                    </p>
                {% endif %}
                {% if value.link %}
                    <div class="mt-4">
                        {% for link in value.link %}
                            {% if link.block_type == 'internal' %}
                                <a class="inline-flex items-center gap-x-1 text-sm font-medium text-blue-600 hover:text-blue-800 dark:text-blue-500 dark:hover:text-blue-400" href="{{ link.page.url }}">
                                    {{ link.title|default:link.page.title }}
                                    <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="m9 18 6-6-6-6"/>
                                    </svg>
                                </a>
                            {% elif link.block_type == 'external' %}
                                <a class="inline-flex items-center gap-x-1 text-sm font-medium text-blue-600 hover:text-blue-800 dark:text-blue-500 dark:hover:text-blue-400" href="{{ link.link }}" target="_blank" rel="noopener noreferrer">
                                    {{ link.title }}
                                    <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="m9 18 6-6-6-6"/>
                                    </svg>
                                </a>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>
    {% endwith %}
{% endif %}
